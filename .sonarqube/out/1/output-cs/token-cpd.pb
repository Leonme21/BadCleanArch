ö!
8C:\Temp\Parcial4\src\Application\UseCases\CreateOrder.cs
	namespace 	
Application
 
. 
UseCases 
; 
public		 
class		 
CreateOrderUseCase		 
{

 
private 
readonly 
OrderService !
_orderService" /
;/ 0
private 
readonly 
IOrderRepository %
_orderRepository& 6
;6 7
private 
readonly 
ILogger 
_logger $
;$ %
public 

CreateOrderUseCase 
( 
OrderService 
orderService !
,! "
IOrderRepository 
orderRepository (
,( )
ILogger 
logger 
) 
{ 
_orderService 
= 
orderService $
??% '
throw( -
new. 1!
ArgumentNullException2 G
(G H
nameofH N
(N O
orderServiceO [
)[ \
)\ ]
;] ^
_orderRepository 
= 
orderRepository *
??+ -
throw. 3
new4 7!
ArgumentNullException8 M
(M N
nameofN T
(T U
orderRepositoryU d
)d e
)e f
;f g
_logger 
= 
logger 
?? 
throw !
new" %!
ArgumentNullException& ;
(; <
nameof< B
(B C
loggerC I
)I J
)J K
;K L
} 
public 

async 
Task 
< 
Order 
> 
ExecuteAsync )
() *
string* 0
customer1 9
,9 :
string; A
productB I
,I J
intK N
quantityO W
,W X
decimalY `
	unitPricea j
)j k
{ 
_logger 
. 
LogInformation 
( 
$str <
)< =
;= >
try 
{ 	
var 
order 
= 
_orderService %
.% &
CreateOrder& 1
(1 2
customer2 :
,: ;
product< C
,C D
quantityE M
,M N
	unitPriceO X
)X Y
;Y Z
_logger!! 
.!! 
LogInformation!! "
(!!" #
$"!!# %
$str!!% <
{!!< =
order!!= B
.!!B C
Id!!C E
}!!E F
"!!F G
)!!G H
;!!H I
var## 
saved## 
=## 
await## 
_orderRepository## .
.##. /
	SaveAsync##/ 8
(##8 9
order##9 >
)##> ?
;##? @
if%% 
(%% 
!%% 
saved%% 
)%% 
{&& 
_logger'' 
.'' 

LogWarning'' "
(''" #
$"''# %
$str''% +
{''+ ,
order'', 1
.''1 2
Id''2 4
}''4 5
$str''5 W
"''W X
)''X Y
;''Y Z
}(( 
else)) 
{** 
_logger++ 
.++ 
LogInformation++ &
(++& '
$"++' )
$str++) /
{++/ 0
order++0 5
.++5 6
Id++6 8
}++8 9
$str++9 P
"++P Q
)++Q R
;++R S
},, 
return.. 
order.. 
;.. 
}// 	
catch00 
(00 
ArgumentException00  
ex00! #
)00# $
{11 	
_logger22 
.22 
LogError22 
(22 
$str22 :
,22: ;
ex22< >
)22> ?
;22? @
throw33 
;33 
}44 	
catch55 
(55 
	Exception55 
ex55 
)55 
{66 	
_logger77 
.77 
LogError77 
(77 
$str77 3
,773 4
ex775 7
)777 8
;778 9
throw88 
;88 
}99 	
}:: 
};; 